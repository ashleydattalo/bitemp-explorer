<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bitemporal Document Insert/Update Demo</title>

    <style>
      body {
        background: AliceBlue;
        background-image: url("http://www.marklogic.com/wp-content/uploads/2015/05/on-demand-token.svg");
        background-size: 100px 100px;
        background-position: right top;
        background-repeat: no-repeat;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 12px;
      }

      h1 {
        text-align: center;
        font-style: italic;
        font-size: 20px;
      }

      #instructions {
        position: absolute;
        left: 850px;
        top: 78px;
        font-size: 13px;
        width: 24em;
        word-wrap: normal;
      }

      #sysTimeBoxes {
        width: 25em;
        word-wrap: normal;
        font-size: 13px;
        font-style: italic;
      }

      #searchURL {
        position: absolute;
        left: 5px;
        top: 4px;
        font-size: 13px;
      }

      #editDocDiv{
        position: absolute;
        left:850px;
        top: 470px;
        width: 25em;
      }

      .hideSysTimeBoxes {
        visibility: hidden;
      }

      .svg-chart .background {
        shape-rendering: crispEdges;
        stroke: #ccc;
        fill: #fdfdfd;
        stroke-width: 1px;
        z-index: 2;
      }
      .svg-chart .g { fill: #4682B4; }

      .tooltip-txt {
      /*  margin: 0;*/
        font-family: Helvetica;
        font-size: 18px;
      /*  line-height: 18px;*/
        font-weight: bold;
        pointer-events: none;
      }

      .tick text {
        font-size: 15px;
        stroke-width: 0;
      }

      .axis-label {
        font-size: 20px;
        stroke-width: 1;
      }

      #dialogCreateDoc {
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-top: 15px;
      }

      #alignBoxes {
        float: right;
        width: 250px;
        height: 100px
      }

      #alignText {
        float: left;
        width: 210px;
        height: 100px;
        text-align: right;
      }

      #newDocContents {
         display: block;
         margin-left: auto;
         margin-right: auto;
         resize: none;
      }

      #selectTempColl {
        width: 160px;
      }

      #docFormat {
        width: 70px;
      }

      #dialogCreateDoc {
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-top: 15px;
      }

      #alignBoxes {
        float: right;
        width: 250px;
        height: 100px
      }

      #alignText {
        float: left;
        width: 210px;
        height: 100px;
        text-align: right;
      }

      #newDocContents {
        display: block;
        margin-left: auto;
        margin-right: auto;
        resize: none;
      }

      #selectTempColl {
        width: 160px;
      }

      #docFormat {
        width: 70px;
      }

      .tick {
        stroke: black;
        stroke-width: 1;
      }

      #uriEntered {
        font-size: 16px;
        position: absolute;
        left: 5px;
        top: 20px;
        width: 25em;
        word-wrap: normal;
      }

      .definition {
        background-color: #E2E2E2;
        display: inline-block;
        font-weight: bold;
        opacity: .7;
        cursor: pointer;
      }

    </style>
  </head>

  <body>
    <h1>MarkLogic <span class='definition' title='Bitemporal: Handles historical data along two different time lines, making it possible to rewind the information “as it actually was” in combination with “as it was recorded” at some point in time'>Bitemporal</span> Visualization Demo</h1>
    <a href="search" id="searchURL">Click to go to search page</a>
    <div id='instructions'>
      <p>Change the logical document display to the specified URI of a logical document.</p>
      <p>Don"t forget to include the "dot extension" ie .json.</p>

      <b>Enter <span class= "definition" title = "URI (Uniform Resource Identifier): A string of characters used to identify a name of a resource">URI:</span></b><br>
      <input type="text" name="collection" value="">
      <input type="button" id="pick-doc" value="Submit">

      <p>Enter a document property to display in the graph or choose one from the drop down menu.</p>

      <b>Enter Document Property:</b><br>
      <input type='text' name='documentProperty' value=''>

      <input type='button' id='change-prop' value='Submit'>
      <br><br>
      <select id='select-prop'>
        <option>Choose a property</option>
      </select>
    </div>

    <p id='uriEntered'></p>
    <br></br>

    <div id='tooltip-txt' class='hidden'>
      <p><span id="value"></span></p>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="http://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script type="text/javascript" src="public/moment.js"></script>
    <script type="text/javascript" src="public/d3.js"></script>
    <script type="text/javascript" src="public/bitemp_graph.js"></script>
    <script type="text/javascript" src="public/bitemp_graph_helper.js"></script>
    <script type="text/javascript" src="public/input_text_load_data.js"></script>

    <div id='bar-chart-large'> </div>
    <div id='editDocDiv'>
      <div id='dialogCreateDoc' hidden title='Create a New Document'>
        <!-- Add contents of creating a document. -->
        <div id='createDocStuff' hidden='true'>
          <div id='alignText'>
            <b> Temporal Collection: </b>
            <br></br>
            <p></p>
            <b> URI: </b>
            <br></br>
            <b>Format: </b>
            <p></p>
          </div>
          <div id='alignBoxes'>
            <select id='selectTempColl' class='dialogue'>
              <option>Choose a temporal collection</option>
            </select>
            <br class='break'></br>
            <input type='text' id='newUri' placeholder='A custom uri here' class='dialogue'>
            <br class='break'></br>
            <select id='docFormat' title='Format' class='dialogue'>
              <option> JSON </option>
              <option> XML </option>
            </select>
          </div>
          <p align='center'> These will be the documents contents, choose to your liking! </p>
          <textarea rows='14' cols='45' id='newDocContents'> </textarea>
        </div>
      </div>

      <button id='createDoc'> Create a Document </button>
      <p id='selectedURI'> Selected URI: <b> null </b></p>
      <button id='editButton' > Edit </button>
      <button id='viewButton'> View </button>
      <button id='deleteButton'> Delete </button>
      <p id='deleteErrMessage'> </p>
      <button id='saveButton' hidden='true'> Save </button>
      <button id='cancelButton' hidden='true'> Cancel </button>
      <textarea rows='12' cols='40' id='contents' hidden = 'true'> </textarea>
      <div id='sysTimeDiv' class='hideSysTimeBoxes'>
        <p> <b> sysStart: </b> <input type='text' id='sysStartBox' value=''>
      </div>
      <div id='deleteButtonsDiv' class='hideSysTimeBoxes'>
          <button id='deleteOKButton'> OK </button>
          <button id='deleteCancelButton'> Cancel </button>
      </div>
    </div> <!-- End editDocDiv -->

    <script type="text/javascript">
      //found from http://stackoverflow.com/questions/19491336/get-url-parameter-jquery
      $.urlParam = function(name) {
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results === null) {
          return null;
        }
        else {
          return results[1] || 0;
        }
      };

      var uri = $.urlParam('collection');
      if (uri !== null) {
        loadData(uri);
        document.getElementById('uriEntered').innerHTML = 'You are displaying documents in ' + uri.bold();
      }
      else {
        loadData('addr.json');
      }
    </script>
  </body>
</html>
